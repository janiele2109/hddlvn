!function(a){"use strict";var b=function(c,d){var e=c.split("."),f=b.instantiate(),g=a,h=e.length,i=0;for(i;h>i;i++)g[e[i]]=h-1===i?f:g[e[i]]||{},g=g[e[i]];return"function"==typeof d&&d.call(null,g,jQuery),g};b.instantiate=function(){var a=function(){},b=function(){var b;return b=new a,b.start.apply(b,arguments),b};return a.prototype=b.prototype,b.prototype.start=function(){},b},a.JOGARMAIS=b}(window),function(a){a.prototype.byElement=function(a){return this.find('[data-element="'+a+'"]')},a.prototype.byAction=function(a){return this.find('[data-action="'+a+'"]')},a.prototype.byComponent=function(a){return this.find('[data-component="'+a+'"]')},a.prototype.getAjaxUrl=function(){return(window.SSBGlobalVars||{}).ajaxUrl},a.prototype.getLocale=function(){return(window.SSBGlobalVars||{}).WPLANG},a.prototype.findComponent=function(b,c){var d=a(this).find(b);return d.length&&"function"==typeof c&&c.call(null,d,a(this)),d.length},a.prototype.ucfirst=function(a){return a=a.replace(/(?:^|-)\w/g,function(a){return a.toUpperCase()}),a.replace(/-/g,"")},a.prototype.getTime=function(){return(new Date).getTime()},a.prototype.hashStr=function(a){var b,c=0,d=0;if(!a.length)return c;for(d;d<a.length;d++)b=a.charCodeAt(d),c=(c<<10)-c+b,c&=c;return Math.abs(c)}}(jQuery),JOGARMAIS("SSB.Application",function(a,b){a.init=function(a){SSB.BuildComponents.create(a)}}),JOGARMAIS("SSB.BuildComponents",function(a){a.create=function(a){a.findComponent("[data-component]",jQuery.proxy(this,"_start"))},a._start=function(a){return"undefined"==typeof SSB.Components?void console.warn("Component not defined in its structure."):void this._iterator(a)},a._iterator=function(a){var b;a.each(function(c,d){d=jQuery(d),b=a.ucfirst(d.data("component")),this._callback(b,d)}.bind(this))},a._callback=function(a,b){var c=SSB.Components[a];"function"==typeof c&&c.call(null,b)}},{}),JOGARMAIS("SSB.Components.CounterSocialShare",function(a,b){a.prototype.start=function(a){this.$el=a,this.prefix=SSB.vars.prefix+"-",this.data=a.data(),this.facebook=this.$el.byElement("facebook"),this.google=this.$el.byElement("google-plus"),this.pinterest=this.$el.byElement("pinterest"),this.linkedin=this.$el.byElement("linkedin"),this.totalShare=this.$el.byElement("total-share"),this.buttons=this.$el.byElement("buttons"),this.closeButtons=SSB.vars.body.byAction("close-buttons"),this.totalCounter=0,this.facebookCounter=0,this.googleCounter=0,this.linkedinCounter=0,this.pinterestCounter=0,this.max=4,this.items=[],this.init()},a.prototype.init=function(){SSB.OpenPopup.create(this.$el),this.addEventListeners(),this.request()},a.prototype.addEventListeners=function(){this.$el.byAction("open-popup").on("click",this.sendRequest.bind(this)),this.closeButtons.on("click",this._onCloseButtons.bind(this))},a.prototype._onCloseButtons=function(a){var b=this.prefix+"icon-right",c=this.prefix+"toggle-active";a.preventDefault(),this.buttons.toggleClass(this.prefix+"buttons"),this.closeButtons.toggleClass(b+" "+c)},a.prototype.request=function(){this.items=[{reference:"facebookCounter",element:"facebook",url:"http://graph.facebook.com/?id="+this.data.elementUrl},{reference:"googleCounter",element:"google",url:b.prototype.getAjaxUrl(),data:this.getParamsGoogle()},{reference:"linkedinCounter",element:"linkedin",url:"http://www.linkedin.com/countserv/count/share?url="+this.data.elementUrl},{reference:"pinterestCounter",element:"pinterest",url:"http://api.pinterest.com/v1/urls/count.json?url="+this.data.elementUrl}],this._eachAjaxSocial()},a.prototype._eachAjaxSocial=function(){this.items.forEach(this._iterateItems.bind(this))},a.prototype._iterateItems=function(a,b,c){var d=0;return this.totalShare.text(d),this[a.element].text(d),this._verifyTimeCache()?void this._getJSON(a):void this.setCounterCache(d,a)},a.prototype.setCounterCache=function(a,b){a=this._getItem(b.element),this.totalCounter+=parseFloat(a),this[b.reference]=a,this[b.element].text(a),this.totalShare.text(this.totalCounter)},a.prototype._getJSON=function(a){var c=b.extend({data:{},dataType:"jsonp",cache:!1},a),d=b.ajax(c);d.done(b.proxy(this,"_done",a)),d.fail(b.proxy(this,"_fail",a))},a.prototype._done=function(a,b){var c=this.getNumberByData(b);this[a.reference]=c,this.max-=1,this.totalCounter+=parseFloat(c),this[a.element].text(c),this._setItem(a.element,c),this.max||(this._setItem("cache",this._timerCache(3600)),this.totalShare.text(this.totalCounter))},a.prototype._fail=function(a,b,c){this[a.reference]=0,this[a.element].text(0)},a.prototype.getNumberByData=function(a){var b=parseFloat(a.shares)+parseFloat(a.comments),c=a.shares;return b||c||a.count||0},a.prototype.getParamsGoogle=function(){return{action:"share_google_plus",url:this.data.elementUrl}},a.prototype.sendRequest=function(){this.items.forEach(this.clearStorage.bind(this));var a={action:"counts_social_share",reference:this.data.attrReference,count_facebook:this.facebookCounter,count_google:this.googleCounter,count_linkedin:this.linkedinCounter,count_pinterest:this.pinterestCounter,nonce:this.data.attrNonce};b.ajax({method:"POST",url:b.prototype.getAjaxUrl(),data:a})},a.prototype.clearStorage=function(a,b,c){this._removeItem(a.element),b+1==c.length&&this._removeItem("cache")},a.prototype._removeItem=function(a){localStorage.removeItem(b.prototype.hashStr(this.data.elementUrl+a))},a.prototype._getItem=function(a){return localStorage.getItem(b.prototype.hashStr(this.data.elementUrl+a))},a.prototype._setItem=function(a,c){localStorage.setItem(b.prototype.hashStr(this.data.elementUrl+a),c)},a.prototype._timerCache=function(a){return b.prototype.getTime()+1e3*a},a.prototype._verifyTimeCache=function(){return this._getItem("cache")<b.prototype.getTime()}}),JOGARMAIS("SSB.OpenPopup",function(a,b){a.create=function(a){this.$el=a,this.addEventListener()},a.addEventListener=function(){var a=this.$el.byAction("open-popup");a.on("click",this._onClick.bind(this))},a._onClick=function(a){a.preventDefault();var b=jQuery(a.currentTarget),c="685",d="500";this.popupCenter(b.attr("href"),"Compartilhar",c,d)},a.popupCenter=function(a,b,c,d){var e,f;return c=c||screen.width,d=d||screen.height,e=.5*screen.width-.5*c,f=.5*screen.height-.5*d,window.open(a,b,"menubar=no,toolbar=no,status=no,width="+c+",height="+d+",toolbar=no,left="+e+",top="+f)}},{}),JOGARMAIS("SSB.ShortUrl",function(a,b){a.create=function(a){this.$el=a,this.data=this.$el.data(),this.shareUrls=this.$el.find("a[href]"),this.checkToken()},a.checkToken=function(){this.data.token.trim()&&this.request()},a.request=function(){var a=b.proxy(this,"_done"),c=b.proxy(this,"_fail"),d={access_token:this.data.token,longUrl:this.longUrl()},e=b.ajax({url:"https://api-ssl.bitly.com/v3/shorten",data:d,dataType:"jsonp"});e.then(a,c)},a.longUrl=function(){return this.data.elementUrl+this.data.tracking},a._done=function(a){return 500===a.status_code?void console.warn("Bitly: "+a.status_txt):void this.shareUrls.each(b.proxy(this,"_each",a))},a._fail=function(a,b){console.warn(a)},a._each=function(a,c,d){var e=b(d),f=e.attr("href"),g=this.replaceUrl(a,f);e.attr("href",g)},a.replaceUrl=function(a,b){var c=encodeURIComponent(a.data.url),d=b.replace(/\[.*\]/,c);return d}},{}),jQuery(function(a){var b=a("body");SSB.vars={body:b,prefix:"ssb-share"},SSB.Application.init.apply(null,[b])});